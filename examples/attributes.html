<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>LISS Example (Attributes)</title>
	<script type="importmap">
		{
			"imports": {
				"LISS": "/index.js"
			}
		}
	</script>
	<script type="module">
		import LISS from 'LISS';

		class MyComponent extends LISS({
											attributes: ["content"] // attributes to observe.
										}) {

			constructor(htmltag) {

				super(htmltag);

				// this.attrs contains the current values of the observed attributes.
				console.log("Attributes (init)", {...this.attrs});

				// you can validate this.attrs here.
				this.content.textContent = this.attrs.content;

				setTimeout( () => {
					this.host.setAttribute("content", 1); // will triggers onAttrChanged
				}, 1000);
				setTimeout( () => {
					this.host.setAttribute("content", 2); // will triggers onAttrChanged
				}, 2000);
			}

			onAttrChanged(name, oldValue, newValue) {

				console.log("AttrChanged", name, oldValue, "->", newValue);
				console.log("Attributes:", {...this.attrs});

				// you can validate this.attrs here.
				if( this.attrs.content === "2" )
					return false; // cancel the change.

				this.content.textContent = this.attrs.content;
				this.attrs.content = "done"; // will NOT trigger onAttrChanged.
			}
		}

		LISS.define('my-component', MyComponent);
	</script>
</head>
<body>
	<my-component content="0"></my-component>
</body>
</html>