<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf8"/>
        <title>LISS</title>
        <meta name="color-scheme" content="dark light">
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <link   href="./index.css"  rel="stylesheet" blocking="render">
        <script  src="./index.js"  type="module"     blocking="render" async></script>
    </head>
    <body code-langs="js,bry">
        <main>

<h1 id="mode-automatique">Mode automatique</h1>
<p>Le mode automatique de LISS permet d&#39;importer automatiquement les composants Web utilisés par la page Web.<br><em>⚠ Ce mode est principalement conçu pour être utilisé lors la phase de prototypage/conception d&#39;une page Web.</em></p>
<p>Il s&#39;utilise en ajoutant une balise <script type="c-html"><script></script> à la page web :</p>
<script type="c-html">
    <!DOCTYPE html>
    <html>
        <head>
            ...
            <script type="module" src="<h>$LISS</h>"
                liss-cdir="<h>$CDIR</h>"
                liss-mode="auto-load"
            ><xscript>
        </head>
        <body>...<xbody>
    </html>
</script>

<p>Chaque composant Web <script type="c-text"><h>$NAME</h></script> est alors défini par un ensemble de fichiers contenus dans le dossier <script type="c-text"><h>$CDIR</h>/<h>$NAME</h>/</script>.<br>Concrètement, votre projet pourra avoir l&#39;arborescence suivante (avec <script type="c-text"><h>$CDIR</h></script> = <script type="c-text">/components/</script>) :</p>
<script type="c-bash">
├── index.html # votre page web.
├── LISS.js    # la bibliothèque LISS
└── components # <h>$CDIR</h>, le répertoire contenant vos composants Web.
    └── hello-world    # défini le composant Web "hello-world".
        ├── index.html # le contenu  du composant Web "hello-world".
        └── index.css  # l'affichage du composant Web "hello-world".
</script>

<p>La page Web pourra alors afficher une instance du composant Web via la balise HTML <script type="c-text"><<h>$NAME</h>></script> :</p>
<liss-playground name="hello-world" show="page.html,output">
</liss-playground>
<div style="text-align:right"><a href="../../../playground/?example=hello-world"><i>Tester l'exemple dans le bac à sable</i></a></div>

<h2 id="définir-le-contenu">Définir le contenu</h2>
<p>Par défaut, le contenu d&#39;un composant Web <script type="c-text"><h>$NAME</h></script> est défini par le fichier <script type="c-text"><h>$CDIR</h>/<h>$NAME</h>/index.html</script> :</p>
<liss-playground name="hello-world" show="index.html,output">
</liss-playground>
<div style="text-align:right"><a href="../../../playground/?example=hello-world"><i>Tester l'exemple dans le bac à sable</i></a></div>


<h2 id="contenu-en-fonction-des-attributs">Contenu en fonction des attributs</h2>
<p>Le mode automatique de LISS permet d&#39;<em>initialiser</em> le contenu du composant Web à partir des attributs de l&#39;hôte :</p>
<liss-playground name="auto-attrs" show="page.html,output">
</liss-playground>
<div style="text-align:right"><a href="../../../playground/?example=auto-attrs"><i>Tester l'exemple dans le bac à sable</i></a></div>

<p>Dans le contenu du composant Web, chaque <script type="c-text">${<h>$ATTR</h>}</script> est remplacé par la valeur de l&#39;attribut <script type="c-text"><h>$ATTR</h></script> de l&#39;hôte :</p>
<liss-playground name="auto-attrs" show="index.html,output">
</liss-playground>
<div style="text-align:right"><a href="../../../playground/?example=auto-attrs"><i>Tester l'exemple dans le bac à sable</i></a></div>

<p>⚠ Pour le moment, les valeurs ne sont pas mises à jour lors de la modification des attributs de l&#39;hôte.</p>
<h2 id="définir-laffichage">Définir l&#39;affichage</h2>
<p>Par défaut, l&#39;affichage d&#39;un composant Web <script type="c-text"><h>$NAME</h></script> est défini par le fichier <script type="c-text"><h>$CDIR</h>/<h>$NAME</h>/index.css</script> :</p>
<liss-playground name="hello-world" show="index.css,output">
</liss-playground>
<div style="text-align:right"><a href="../../../playground/?example=hello-world"><i>Tester l'exemple dans le bac à sable</i></a></div>

<h2 id="définir-le-comportement">Définir le comportement</h2>
<h2 id="fonctionnement-interne-pour-les-développeurs">Fonctionnement interne (pour les développeurs)</h2>
<ol>
<li>si script liss-mode=auto-load + liss-cdir</li>
<li>detect all tags</li>
<li>addTag if not defined (check if already defined)</li>
<li>importComponentV3 (fetch files from cdir)<ol>
<li>_fetchText() =&gt; override if playground.</li>
</ol>
</li>
<li>defineWebComponentV3 (build class + define it)</li>
</ol>
<p>-&gt; fetch
-&gt; donc requêtes/certaines inutile, pas perfs, proto/dev.</p>
<p>Le mode automatique de LISS est principalement conçu pour la conception de prototypes. Il n&#39;est ainsi pas conçu pour être performant.</p>
<p>Si vous souhaitez plus de performances, il vous faudra alors utiliser le mode non-automatique.</p>
</main>
    </body>
</html>