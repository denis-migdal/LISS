{"version":3,"file":"index.js","mappings":"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","sources":["webpack://LISS/./src/V3/ContentGenerators/AutoContentGenerator.ts","webpack://LISS/./src/V3/ContentGenerators/ContentGenerator.ts","webpack://LISS/./src/V3/LISS.ts","webpack://LISS/./src/V3/LISS/LISSBase.ts","webpack://LISS/./src/V3/LISS/LISSFull.ts","webpack://LISS/./src/V3/LISS/LISSSignal.ts","webpack://LISS/./src/V3/LISS/LISSUpdate.ts","webpack://LISS/./src/V3/define/autoload.ts","webpack://LISS/./src/V3/define/define.ts","webpack://LISS/./src/V3/define/index.ts","webpack://LISS/./src/V3/define/isDefined.ts","webpack://LISS/./src/V3/define/whenDefined.ts","webpack://LISS/./src/V3/index.ts","webpack://LISS/./src/V3/signals/IndirectSignal.ts","webpack://LISS/./src/V3/signals/ROSignal.ts","webpack://LISS/./src/V3/signals/Signal.ts","webpack://LISS/./src/V3/signals/SignalEvent.ts","webpack://LISS/./src/V3/utils/DOM/getPropertyInitialValue.ts","webpack://LISS/./src/V3/utils/DOM/isDOMContentLoaded.ts","webpack://LISS/./src/V3/utils/DOM/isPageLoaded.ts","webpack://LISS/./src/V3/utils/DOM/whenDOMContentLoaded.ts","webpack://LISS/./src/V3/utils/DOM/whenPageLoaded.ts","webpack://LISS/./src/V3/utils/encode.ts","webpack://LISS/./src/V3/utils/execute/index.ts","webpack://LISS/./src/V3/utils/execute/js.ts","webpack://LISS/./src/V3/utils/network/fetchText.ts","webpack://LISS/./src/V3/utils/network/require.ts","webpack://LISS/./src/V3/utils/network/ressource.ts","webpack://LISS/./src/V3/utils/parsers/html.ts","webpack://LISS/./src/V3/utils/parsers/index.ts","webpack://LISS/./src/V3/utils/parsers/isTemplateString.ts","webpack://LISS/./src/V3/utils/parsers/style.ts","webpack://LISS/./src/V3/utils/parsers/template.ts","webpack://LISS/./src/V3/utils/tests/assertElement.ts","webpack://LISS/./src/index.ts","webpack://LISS/webpack/bootstrap","webpack://LISS/webpack/runtime/async module","webpack://LISS/webpack/runtime/define property getters","webpack://LISS/webpack/runtime/hasOwnProperty shorthand","webpack://LISS/webpack/runtime/make namespace object","webpack://LISS/webpack/before-startup","webpack://LISS/webpack/startup","webpack://LISS/webpack/after-startup"],"sourcesContent":["import { HTML } from \"V3/utils/parsers/template\";\nimport ContentGenerator from \"./ContentGenerator\";\nimport encodeHTML from \"V3/utils/encode\";\n\nconst regex = /\\$\\{(.+?)\\}/g;\n\nexport default class AutoContentGenerator extends ContentGenerator {\n\n    protected override prepareTemplate(html: HTML) {\n        \n        this.data = null;\n\n        if( typeof html === 'string' ) {\n            this.data = html;\n            return;\n            /*\n            html = html.replaceAll(/\\$\\{([\\w]+)\\}/g, (_, name: string) => {\n                return `<liss value=\"${name}\"></liss>`;\n            });*/\n\n            //TODO: ${} in attr\n                // - detect start ${ + end }\n                // - register elem + attr name\n                // - replace. \n        }\n        \n        super.prepareTemplate(html);\n    }\n\n    override fillContent(shadow: ShadowRoot) {\n        \n        // https://stackoverflow.com/questions/29182244/convert-a-string-to-a-template-string\n        if( this.data !== null) {\n            const str = (this.data as string).replace(regex, (_, match) => {\n                const value = shadow.host.getAttribute(match);\n                if( value === null)\n                    return ''; \n                return encodeHTML(value);\n            });\n\n            super.prepareTemplate(str);\n        }\n\n        super.fillContent(shadow);\n\n        /*\n        // html magic values could be optimized...\n        const values = content.querySelectorAll('liss[value]');\n        for(let value of values)\n            value.textContent = host.getAttribute(value.getAttribute('value')!)\n        */\n    }\n}","import { isRessourceReady, Ressource, waitRessource } from \"V3/utils/network/ressource\";\nimport template, { HTML } from \"V3/utils/parsers/template\";\nimport style   , {CSS}    from \"V3/utils/parsers/style\";\nimport isDOMContentLoaded from \"V3/utils/DOM/isDOMContentLoaded\";\nimport whenDOMContentLoaded from \"V3/utils/DOM/whenDOMContentLoaded\";\n\ntype STYLE = CSS | CSS[];\n\nexport type ContentGenerator_Opts = {\n    html   ?: Ressource<HTML>,\n    css    ?: Ressource<STYLE>\n}\n\nconst sharedCSS = new CSSStyleSheet();\n//const sharedCSS = getSharedCSS(); // from LISSHost...\n\nexport default class ContentGenerator {\n\n    protected data: any;\n\n    constructor({\n        html,\n        css    = [],\n    }: ContentGenerator_Opts = {}) {\n\n        const isReady = isRessourceReady<HTML> (html)\n                     && isRessourceReady<STYLE>(css)\n                     && isDOMContentLoaded();\n\n        if( isReady )\n            this.prepare(html, css);\n\n        const whenReady: Promise<[HTML|undefined, STYLE|undefined, unknown]> = Promise.all([\n            waitRessource<HTML |undefined>(html),\n            waitRessource<STYLE|undefined>(css),\n            whenDOMContentLoaded()\n        ]);\n\n        whenReady.then( (args) => this.prepare(args[0], args[1]) );\n\n        this.isReady   = isReady;\n        this.whenReady = whenReady;\n    }\n\n    /** ready ***/\n\n    readonly whenReady: Promise<unknown>;\n    readonly isReady  : boolean = false;\n\n    /** process ressources **/\n\n    protected stylesheets: CSSStyleSheet[]       = [];\n    protected template   : DocumentFragment|null = null;\n\n    protected prepare(html: HTML|undefined, css: STYLE|undefined) {\n        if( html !== undefined )\n            this.prepareTemplate(html);\n        if( css  !== undefined )\n            this.prepareStyle   (css);\n    }\n\n    protected prepareTemplate(html: HTML) {\n        this.template = template(html);\n    }\n    protected prepareStyle(css: STYLE) {\n\n        if( ! Array.isArray(css) )\n            css = [css];\n\n        this.stylesheets = css.map(e => style(e) );\n    }\n\n    /*** Generate contents ***/\n\n    initContent(target: HTMLElement, mode:\"open\"|\"closed\"|null) {\n\n        let content: ShadowRoot|HTMLElement = target;\n        if( mode !== null) {\n            content = target.attachShadow({mode});\n            content.adoptedStyleSheets.push(sharedCSS, ...this.stylesheets);\n        }\n        //TODO: CSS for no shadow ???\n        \n        this.fillContent(content);\n\n        return content;\n    }\n\n    fillContent(target: ShadowRoot|HTMLElement|DocumentFragment) {\n        \n        if( this.template !== null)\n            target.replaceChildren( this.createContent() );\n\n        //TODO...\n        customElements.upgrade(target);\n    }\n\n    createContent() {\n        return this.template!.cloneNode(true);\n    }\n}","import ContentGenerator from \"V3/ContentGenerators/ContentGenerator\";\nimport LISSFull from \"./LISS/LISSFull\";\n\ntype Cstr<T> = new(...args:any[]) => T\ntype LISSv3_Opts<T extends Cstr<ContentGenerator> > = {\n    content_generator: T,\n} & ConstructorParameters<T>[0];\n\n//  builder\nexport function LISS<T extends Cstr<ContentGenerator> = Cstr<ContentGenerator>>(opts: Partial<LISSv3_Opts<T>> = {}) {\n    \n    const content_generator = opts.content_generator ?? ContentGenerator;\n    // @ts-ignore\n    const generator: ContentGenerator = new content_generator(opts);\n    \n    return class _LISS<T = void> extends LISSFull<T> {\n\n        // TODO: no content if... ???\n        // override attachShadow  ???\n        static override readonly SHADOW_MODE       = \"open\";\n        static override readonly CONTENT_GENERATOR = generator;\n\n    }\n}\n\n// used for plugins.\nexport class ILISS {}\nexport default LISS as typeof LISS & ILISS;","import ContentGenerator from \"V3/ContentGenerators/ContentGenerator\";\n\nexport default class LISSBase extends HTMLElement {\n\n    static readonly SHADOW_MODE      : \"open\"|\"closed\"|null = null;\n    // TODO: static cache getter + use static HTML/CSS.\n    static readonly CONTENT_GENERATOR: ContentGenerator|null = null;\n\n    readonly content  : ShadowRoot|HTMLElement        = this;\n    readonly host     : HTMLElement                   = this;\n    readonly controler: Omit<this, keyof HTMLElement> = this;\n\n    constructor() {\n        super();\n\n        const klass = this.constructor as typeof LISSBase;\n\n        if( klass.CONTENT_GENERATOR !== null )\n            this.content = klass.CONTENT_GENERATOR.initContent(this, klass.SHADOW_MODE);\n    }\n\n\n    // define for auto-complete.\n    static observedAttributes: string[] = [];\n    attributeChangedCallback(name: string, oldval: string|null, newval: string|null){}\n}","export {default as default} from \"./LISSSignal.ts\";","import ROSignal   from \"V3/signals/ROSignal\";\nimport LISSUpdate from \"./LISSUpdate\";\nimport { Signal } from \"V3/signals/Signal\";\nimport getPropertyInitialValue from \"V3/utils/DOM/getPropertyInitialValue\";\n\n//TODO: getter ?\n\nexport default class LISSSignal<T> extends LISSUpdate {\n\n    #signal = new Signal<T>();\n\n    #callback = () => this.requestUpdate();\n\n    constructor(value: null|T = null, signal: null|ROSignal<T> = null) {\n        super();\n\n        value  ??= getPropertyInitialValue(this, \"value\" , null);\n        signal ??= getPropertyInitialValue(this, \"source\", null)\n\n        if( value  !== null)\n            this.#signal.value = value;\n        if( signal !== null)\n            this.#signal.source = signal;\n\n        this.#signal.listen( this.#callback );\n    }\n\n    set source(source: ROSignal<T>|null) {\n        this.#signal.source = source;\n    }\n    set value(value: T|null) {\n        this.#signal.value = value;\n    }\n\n}","import LISSBase from \"./LISSBase\";\n\nexport default class LISSUpdate extends LISSBase {\n\n    constructor() {\n        super();\n\n        observer.observe(this);\n    }\n\n    #requestID: null|number = null;\n    #updateRequested = false;\n    #isVisible       = false;\n\n    static processIntersectionObserver(entries: IntersectionObserverEntry[]) {\n\n        for(let i = 0; i < entries.length; ++i) {\n\n            const target     = entries[i].target as LISSUpdate;\n            const isVisible  = entries[i].isIntersecting;\n\n            target.#isVisible = isVisible;\n\n            if( ! isVisible && target.#requestID !== null)\n                cancelAnimationFrame(target.#requestID);\n\n            if( isVisible && target.#updateRequested && target.#requestID === null )\n                target.#scheduleUpdate();\n        }\n    }\n\n    #scheduleUpdate() {\n        this.#requestID = requestAnimationFrame( () => {\n            this.#requestID       = null;\n            this.#updateRequested = false;\n            this.onUpdate();\n        });\n    }\n\n    requestUpdate() {\n\n        if( this.#updateRequested )\n            return;\n\n        this.#updateRequested = true;\n\n        if( ! this.#isVisible )\n            return;\n\n        this.#scheduleUpdate();\n    }\n\n    protected onUpdate() {\n\n    }\n}\n\nconst observer = new IntersectionObserver( LISSUpdate.processIntersectionObserver );","import define, { WaitingDefine } from \"V3/define/define\";\nimport LISS from \"V3\";\nimport AutoContentGenerator from \"V3/ContentGenerators/AutoContentGenerator\";\nimport isPageLoaded from \"V3/utils/DOM/isPageLoaded\";\nimport whenPageLoaded from \"V3/utils/DOM/whenPageLoaded\";\nimport fetchText from \"V3/utils/network/fetchText\";\nimport execute from \"V3/utils/execute\";\n\nconst script =  document.querySelector<HTMLElement>('script:is([liss-auto],[liss-cdir],[liss-sw])');\n\nexport const LISS_MODE    = script?.getAttribute('liss-mode') ?? null;\nexport const DEFAULT_CDIR = script?.getAttribute('liss-cdir') ?? null;\n\n// TODO: default ?\nconst SW_PATH             = script?.getAttribute('liss-sw') ?? null;\n\nif(LISS_MODE === \"auto-load\" && DEFAULT_CDIR !== null) {\n    if( ! isPageLoaded() )\n        await whenPageLoaded();\n    autoload(DEFAULT_CDIR);\n}\n\nexport function autoload(cdir: string) {\n\n    const SW: Promise<void> = new Promise( async (resolve) => {\n\n        if( SW_PATH === null ) {\n            console.warn(\"You are using LISS Auto mode without sw.js.\");\n            resolve();\n            return;\n        }\n        \n        try {\n            await navigator.serviceWorker.register(SW_PATH, {scope: \"/\"});\n        } catch(e) {\n            console.warn(\"Registration of ServiceWorker failed\");\n            console.error(e);\n            resolve();\n        }\n\n        if( navigator.serviceWorker.controller ) {\n            resolve();\n            return;\n        }\n\n        navigator.serviceWorker.addEventListener('controllerchange', () => {\n            resolve();\n        });\n    });\n\n    if( cdir[cdir.length-1] !== '/')\n        cdir += '/';\n\n    //const brython = script.getAttribute(\"brython\");\n\n    // observe for new injected tags.\n    new MutationObserver( (mutations) => {\n        for(let mutation of mutations)\n            for(let addition of mutation.addedNodes)\n                if( addition.constructor.name === \"HTMLElement\" )\n                // cf https://github.com/WICG/webcomponents/issues/1097#issuecomment-2665092315\n                // if(addition instanceof HTMLUnknownElement)\n                    addTag(addition as HTMLElement)\n\n    }).observe( document, { childList:true, subtree:true });\n\n    for( let elem of document.querySelectorAll<HTMLElement>(\":not(:defined)\") )\n        addTag( elem );\n\n    async function addTag(tag: HTMLElement) {\n\n        await SW; // ensure SW is installed.\n\n        const tagname = tag.tagName.toLowerCase();\n\n        if(  WaitingDefine.has(tagname)\n            // could be defined, but not yet upgraded\n         || customElements.get(tagname) !== undefined)\n            return;\n\n        loadComponent(tagname, {\n            //brython,\n            cdir\n        });\t\t\n    }\n}\n\n/*****/\n\ntype loadComponent_Opts = {\n\tcdir   ?: string|null\n};\n\ntype Cstr<T> = (...args: any[]) => T;\n\nexport async function loadComponent<T extends HTMLElement = HTMLElement>(\n\ttagname: string,\n\t{\n\t\tcdir    = DEFAULT_CDIR,\n\t\t// brython = null\n\t}: loadComponent_Opts = {}\n): Promise<Cstr<T>> {\n\n\tWaitingDefine.add(tagname);\n\n    let true_tagdir = LISSContext?.override_tags?.[tagname] ?? tagname;     \n\n\tconst compo_dir = `${cdir}${true_tagdir}/`;\n\n\tconst files: Record<string,string|undefined> = {};\n\n\t// strats : JS -> Bry -> HTML+CSS (cf script attr).\n\n    files[\"js\"] = await fetchText(`${compo_dir}index.js`, true);\n\n    if( files[\"js\"] === undefined) {\n        // try/catch ?\n        const promises = [\n            fetchText(`${compo_dir}index.html`, true)!,\n            fetchText(`${compo_dir}index.css` , true)!\n        ];\n\n        [files[\"html\"], files[\"css\" ]] = await Promise.all(promises);\n    }\n\n\treturn await defineWebComponent(tagname, files, compo_dir);\n}\n\n//TODO: rename from files ?\nasync function defineWebComponent(tagname: string,\n                                  files: Record<string, any>,\n                                  origin : string,\n                                ) {\n    \n    let klass;\n    if( \"js\" in files )\n        klass = (await execute<any>(files[\"js\"], \"js\", origin)).default;\n\n    if( klass === undefined )\n        klass = LISS({\n            content_generator: AutoContentGenerator,\n            ...files\n        });\n\n    define(tagname, klass);\n\n    return klass;\n}","import ContentGenerator from \"V3/ContentGenerators/ContentGenerator\";\nimport { _whenDefinedPromises } from \"./whenDefined\";\n\nexport const WaitingDefine = new Set<string>();\n\nexport default async function define(tagname: string, Klass: new(...args:any[]) => HTMLElement) {\n\n    //TODO: Python class...\n\n    //TODO: type safe\n    if( \"CONTENT_GENERATOR\" in Klass ) {\n        const generator = Klass.CONTENT_GENERATOR as ContentGenerator;\n\n        if( ! generator.isReady ) {\n            WaitingDefine.add(tagname);\n            await generator.whenReady;\n        }\n    }\n\n    WaitingDefine.delete(tagname);\n    customElements.define(tagname, Klass);\n\n    const p = _whenDefinedPromises.get(Klass);\n    if( p !== undefined )\n        p.resolve();\n}\n\nimport LISS from \"V3/LISS\";\n\ndeclare module \"V3/LISS\" {\n    interface ILISS {\n        define: typeof define;\n    }\n}\n\nLISS.define = define;","import define      from \"./define\";\nimport isDefined   from \"./isDefined\";\nimport whenDefined from \"./whenDefined\";\n\nimport LISS from \"V3/LISS\";\n\ndeclare module \"V3/LISS\" {\n    interface ILISS {\n        define    : typeof define;\n        isDefined: typeof isDefined;\n        whenDefined   : typeof whenDefined;\n    }\n}\n\nLISS.define      = define;\nLISS.isDefined   = isDefined;\nLISS.whenDefined = whenDefined;\n\nexport {define, isDefined, whenDefined};","export default function isDefined(elem: string|(new(...args:any[])=>HTMLElement)): boolean {\n    \n    if( typeof elem === \"string\")\n        return customElements.get(elem) !== undefined;\n\n    return customElements.getName(elem) !== null;\n}","type Cstr<T> = new(...args:any[])=> T;\n\nexport const _whenDefinedPromises = new WeakMap<Cstr<HTMLElement>, PromiseWithResolvers<void>>();\n\nexport default async function whenDefined<T extends HTMLElement>(elem: string|Cstr<T>): Promise<Cstr<T>> {\n    \n    if( typeof elem === \"string\")\n        return await customElements.whenDefined(elem) as Cstr<T>;\n\n    if( customElements.getName(elem) !== null)\n        return elem as Cstr<T>;\n\n    let p = _whenDefinedPromises.get(elem);\n    if( p === undefined ){\n        p = Promise.withResolvers<void>();\n        _whenDefinedPromises.set(elem, p);\n    }\n\n    await p.promise;\n    return elem;\n}","import LISS from \"./LISS\";\n\n// HERE...\n\nimport \"./define\";\nimport \"./define/autoload\";\n\nimport \"./utils/parsers\";\nimport \"./utils/network/require\";\n\nimport \"./utils/tests/assertElement\";\n\nexport default LISS;","import ROSignal from \"./ROSignal\";\n\nexport default class IndirectSignal<T = unknown, U = T> extends ROSignal<U> {\n\n    #source: ROSignal<T>|null = null;\n\n    protected _valueRead = false;\n\n    constructor(source: ROSignal<T>|null = null) {\n        super();\n\n        this.#source = source;\n        this.#source?.listen( this._callback );\n    }\n\n    protected override trigger(): this {\n        \n        // no needs to trigger if previous value wasn't read.\n        if( ! this._valueRead )\n            return this;\n\n        this._valueRead = false;\n        super.trigger();\n\n        return this;\n    }\n\n    protected _callback = () => this.trigger();\n\n    get source(): ROSignal<T>|null {\n        return this.#source;\n    }\n\n    set source(source: ROSignal<T>|null) {\n\n        if( this.#source === source ) // nop\n            return;\n\n        if( this.#source !== null)\n            this.#source.unlisten(this._callback);\n\n        this.#source = source;\n\n        if( this.#source !== null)\n           this.#source.listen(this._callback);\n        else\n            this._callback();\n    }\n\n    ack() {\n        this._valueRead = true;\n    }\n\n    override get value(): U|null {\n\n        this.ack();\n\n        if( this.#source === null)\n            return null;\n        return this.#source.value as U|null;\n    }\n}","import SignalEvent from \"./SignalEvent\";\n\nexport default abstract class ROSignal<T> extends SignalEvent {\n\n    override listen(callback: (pthis: SignalEvent) => void) {\n        \n        super.listen(callback);\n\n        callback(this); // initial callback (when signal Data)\n\n        return this;\n    }\n\n    abstract readonly value: T|null;\n}","import IndirectSignal from \"./IndirectSignal\";\nimport ROSignal from \"./ROSignal\";\n\nexport class Signal<T> extends IndirectSignal<T> {\n\n    protected _value: T|null = null;\n\n    constructor(value: T|null = null, source: ROSignal<T>|null = null) {\n        super(source);\n        this._value = value;\n    }\n\n    override set source(source: ROSignal<T>|null) {\n\n        if( source !== null )\n            this._value = null;\n\n        super.source = source; // may trigger if source change\n    }\n\n    override get value() {\n\n        if( this.source !== null)\n            return super.value;\n\n        this.ack();\n        return this._value;\n    }\n\n    override set value(value: T|null) {\n\n        const oldValue = this._value;\n        this._value = value;\n\n        if( this.source !== null ) {\n            this.source = null; // will trigger\n            return;\n        }\n\n        // trigger only if value changed\n        if( value !== oldValue)\n            this.trigger();\n\n        return;\n    }\n}","\nexport default class SignalEvent {\n\n    #callbacks = new Set<(pthis: SignalEvent) => void>();\n\n    listen(callback: (pthis: SignalEvent) => void) {\n        this.#callbacks.add(callback);\n\n        return this;\n    }\n    unlisten(callback: (pthis: SignalEvent) => void) {\n        this.#callbacks.delete(callback);\n\n        return this;\n    }\n\n    protected trigger() {\n\n        for(let callback of this.#callbacks)\n            callback(this);\n\n        return this;\n    }\n}","export default function getPropertyInitialValue<E extends HTMLElement,\n                                                N extends keyof E,\n                                                D = undefined>\n                                (e: E, name: N, defaultValue?: D): D|E[N] {\n\n    if( ! Object.hasOwn(e, name) )\n        return defaultValue as D;\n\n    const  _ = e[name];\n    delete     e[name];\n    return _;\n}","export default function isDOMContentLoaded() {\n    return document.readyState === \"interactive\" || document.readyState === \"complete\";\n}","export default function isPageLoaded() {\n    return document.readyState === \"complete\"\n}","import isDOMContentLoaded from \"./isDOMContentLoaded\";\n\nexport default async function whenDOMContentLoaded() {\n    if( isDOMContentLoaded() )\n        return;\n\n    const {promise, resolve} = Promise.withResolvers<void>()\n\n\tdocument.addEventListener('DOMContentLoaded', () => {\n\t\tresolve();\n\t}, true);\n\n    await promise;\n}","import isPageLoaded from \"./isPageLoaded\";\n\nexport default async function whenDOMContentLoaded() {\n    if( isPageLoaded() )\n        return;\n\n    const {promise, resolve} = Promise.withResolvers<void>()\n\n\tdocument.addEventListener('load', resolve as any, true);\n\n    await promise;\n}","const converter = document.createElement('span');\n\nexport default function encodeHTML(text: string) {\n\tconverter.textContent = text;\n\treturn converter.innerHTML;\n}","import executeJS from \"./js\";\n\nexport default async function execute<T>(code: string, type: \"js\", origin: string): Promise<T> {\n\n    if( type === \"js\" )\n        return await executeJS<T>(code, origin);\n\n    throw new Error('');\n}","export default async function executeJS<T>(code: string, origin: string): Promise<T> {\n\n    const file = new Blob([code], { type: 'application/javascript' });\n    const url  = URL.createObjectURL(file);\n\n    const id = url.slice(url.lastIndexOf('/') + 1 );\n    ((globalThis.LISSContext ??={}).execute ??= {url_map: {}}).url_map[id] = origin;\n\n    const result = (await import(/* webpackIgnore: true */ url));\n    \n    URL.revokeObjectURL(url);\n\n    return result as unknown as T;\n}\n\n\ndeclare global {\n\n    interface LISSContext {\n        execute?: {\n            url_map: Record<string, string>\n        }\n    }\n\n    var LISSContext: LISSContext;\n    \n}","// in auto-mode use ServiceWorker to hide 404 error messages.\n// if playground files, use them.\nexport default async function fetchText(uri: string|URL, hide404: boolean = false) {\n\n    const fetchContext = globalThis.LISSContext?.fetch;\n    if( fetchContext !== undefined ) { // for the playground\n        const path = new URL(uri, fetchContext.cwd );\n        const value = fetchContext.files[path.toString()];\n        if( value === \"\" )\n            return undefined;\n        if( value !== undefined)\n            return value;\n    }\n\n    const options = hide404\n                        ? {headers:{\"liss-auto\": \"true\"}}\n                        : {};\n\n\n    const response = await fetch(uri, options);\n    if(response.status !== 200 )\n        return undefined;\n\n    if( hide404 && response.headers.get(\"status\")! === \"404\" )\n        return undefined;\n\n    const answer = await response.text();\n\n    if(answer === \"\")\n        return undefined;\n\n    return answer\n}\n\n\n\ndeclare global {\n\n    interface LISSContext {\n        fetch?: {\n            cwd  : string,\n            files: Record<string, string>\n        }\n    }\n\n    var LISSContext: LISSContext;\n}","import fetchText from \"./fetchText\";\n\n// @ts-ignore\nglobalThis.require = async function(url: string) {\n\n    const stack = new Error().stack!;\n\n    let caller: string;\n    if( stack.startsWith(\"Error\") ) {   // Chrome ?\n        caller = stack.split('\\n')[1+1].slice(7);\n    } else {                            // FF ?\n        caller = stack.split('\\n')[1].slice(1);\n    }\n\n    if( caller.startsWith('blob:') ) {\n\n        caller = caller.slice(caller.lastIndexOf('/') + 1 );\n        caller = caller.slice(0, caller.indexOf(':'));\n\n        url = LISSContext.execute!.url_map[caller] + url;\n        \n        //TODO: rewrite URL...\n    } else {\n        console.warn( caller );\n        throw new Error(\"require from non-blob import, unimplemented\");\n    }\n\n    // TODO: reverify playground\n\n    return await fetchText(url);\n}","export type Ressource<T> =\n      T\n    | Promise<T>\n    | (T extends string         ? Promise<Response> | Response : never)\n    | (T extends Array<infer E> ? Ressource<E>[]               : never);\n\nexport function isRessourceReady<T>(res: Ressource<T>|undefined): res is T|undefined {\n\n    if( Array.isArray(res) )\n        return res.every( e => isRessourceReady(e) );\n\n    return res === undefined || !(res instanceof Promise || res instanceof Response);\n}\n\nexport async function waitRessource<T>(res: Ressource<T>): Promise<T> {\n\n    if( Array.isArray(res) )\n        return await Promise.all(res.map( e => waitRessource(e))) as T;\n\n    if( res instanceof Promise)\n        res = await res;\n\n    if( res instanceof Response)\n        res = await res.text() as T;\n\n    return res as T;\n}","import isTemplateString from \"./isTemplateString\";\nimport { Template } from \"./types\";\n\nconst template = document.createElement(\"template\");\nconst df = template.content;\n\nexport default function html<T extends HTMLElement>(...raw: Template<string>): T {\n    \n    let elem: string = raw[0] as any;\n\n    if( isTemplateString(raw) ) {\n        \n        const str = raw[0];\n\n        let string = str[0];\n        for(let i = 1; i < raw.length; ++i) {\n            string += raw[i];\n            string += str[i];\n        }\n\n        elem = string;\n    }\n\n    template.innerHTML = elem;\n\n    if( df.childNodes.length !== 1)\n        throw new Error(\"Error\");\n\n    return df.firstChild as T;\n}","import LISS from \"V3/LISS\";\n\nimport html     from \"./html\"\nimport template from \"./template\";\nimport style    from \"./style\";\n\ndeclare module \"V3/LISS\" {\n    interface ILISS {\n        html    : typeof html;\n        template: typeof template;\n        style   : typeof style;\n    }\n}\n\nLISS.style    = style;\nLISS.template = template;\nLISS.html     = html;\n\nexport {style, template, html};","export default function isTemplateString(raw: [unknown, ...unknown[]]): raw is [TemplateStringsArray, ...string[]] {\n    return Array.isArray(raw[0]);\n}","import { Template } from \"./types\";\n\nexport type CSS   = string|CSSStyleSheet|HTMLStyleElement;\n\nexport default function style(...raw: Template<CSS>): CSSStyleSheet {\n\n    let elem = raw[0];\n\n    if( elem instanceof CSSStyleSheet )\n        return elem;\n    if( elem instanceof HTMLStyleElement)\n        return elem.sheet!;\n\n    if( Array.isArray(elem) ) {\n        \n        const str = raw[0] as TemplateStringsArray;\n\n        let string = str[0];\n        for(let i = 1; i < raw.length; ++i) {\n            string += raw[i];\n            string += str[i];\n        }\n\n        elem = string;\n    }\n\n    if( typeof elem !== \"string\") {\n        console.warn(elem);\n        console.trace();\n        throw new Error(\"Should not occurs\");\n    }\n\n    const style = new CSSStyleSheet();\n    style.replaceSync(elem);\n    return style;\n}","import isTemplateString from \"./isTemplateString\";\nimport { Template } from \"./types\";\n\nexport type HTML  = DocumentFragment|HTMLElement|string;\n\nexport default function template( ...raw:Template<HTML>): DocumentFragment {\n\n    let elem: HTML = raw[0] as any;\n\n    if( isTemplateString(raw) ) {\n        \n        const str = raw[0];\n\n        let string = str[0];\n        for(let i = 1; i < raw.length; ++i) {\n            string += raw[i];\n            string += str[i];\n        }\n\n        elem = string;\n    }\n\n    if( elem instanceof DocumentFragment )\n        return elem.cloneNode(true) as DocumentFragment;\n\n    // must use template as DocumentFragment doesn't have .innerHTML\n    let template = document.createElement('template');\n\n    if(typeof elem === 'string')\n        template.innerHTML = elem.trim();\n    else {\n        if( elem instanceof HTMLElement)\n            // prevents issue if elem is latter updated.\n            elem = elem.cloneNode(true) as HTMLElement;\n        \n        template.append( elem );\n    }\n\n    //if( template.content.childNodes.length === 1 && template.content.firstChild!.nodeType !== Node.TEXT_NODE)\n    //  return template.content.firstChild! as unknown as T;\n    \n    return template.content!;\n}","import whenDefined from \"V3/define/whenDefined\";\n\ntype Options = {\n    shadow_html?: string,\n    css        ?: Record<string, Record<string, string>>\n}\n\nfunction waitFrame() {\n    const { promise, resolve} = Promise.withResolvers<void>();\n\n    requestAnimationFrame( () => resolve() );\n\n    return promise;\n}\n\nexport default async function assertElement(tagname: string, opts: Options = {}) {\n    \n    const shadow_html = opts.shadow_html ?? null;\n    const css         = opts.css         ?? {};\n\n\n    await whenDefined(tagname);\n\n    //for(let i = 0; i < 1; ++i)\n    //    await waitFrame();\n\n    const elem = document.querySelector(tagname);\n\n    if( elem === null )\n        throw new Error(\"Component not found\");\n\n    //TODO: await LISS.whenInitialized(elem); ?\n\n    if( elem.tagName.toLowerCase() !== tagname )\n        throw new Error(\n`Wrong tagname.\nExpected: ${tagname}\nGot: ${elem.tagName.toLowerCase()}`);\n\n    if( elem.constructor.name === \"HTMLElement\")\n        throw new Error(`Element not upgraded!`);\n\n    if( shadow_html !== elem.shadowRoot ) {\n        if( shadow_html === null || elem.shadowRoot === null )\n            throw new Error(`ShadowRoot missing or unexpected.`);\n        if( shadow_html !== elem.shadowRoot.innerHTML )\n            throw new Error(\n`HTML content mismatched.\nExpected: ${shadow_html}\nGot: ${elem.shadowRoot.innerHTML}`);\n    }\n\n    for(let selector in css ) {\n        const expected = css[selector];\n\n        let sub_elems: NodeListOf<HTMLElement>|HTMLElement[];\n        if( selector === \"\")\n            sub_elems = [elem as HTMLElement];\n        else\n            sub_elems = (((elem as any).content ?? elem.shadowRoot ?? elem) as ShadowRoot|HTMLElement).querySelectorAll<HTMLElement>(selector);\n    \n        if( sub_elems.length === 0)\n            throw new Error(`Elements \"${selector}\" not found`);\n\n        for( let sub_elem of sub_elems ) {\n\n            // compare style : https://stackoverflow.com/questions/59342928/getcomputedstyle-only-the-changes-from-default\n            //  ^ get all elements, find matching qs, compare\n            // pseudo class  : https://stackoverflow.com/questions/32091848/template-queryselector-using-scope-pseudo-class-works-with-document-but-not\n\n            const css = getComputedStyle(sub_elem)\n            for(let propname in expected) {\n                const val = css.getPropertyValue(propname);\n                if( val !== expected[propname] ) {\n                        throw new Error(\n        `CSS mismatch\n        Expected:${expected}\n        Got: ${css}`);\n                }\n            }\n        }\n    }\n}\n\nimport LISS from \"V3/LISS\";\n\ndeclare module \"V3/LISS\" {\n    interface ILISS {\n        assertElement    : typeof assertElement;\n    }\n}\n\nLISS.assertElement = assertElement;\n","//export {default as V2} from \"V2\";\nexport {default as V3} from \"V3\";\n\nimport LISS from \"V3\";\nexport default LISS;\n\n// @ts-ignore\nglobalThis.LISS = LISS;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","var webpackQueues = typeof Symbol === \"function\" ? Symbol(\"webpack queues\") : \"__webpack_queues__\";\nvar webpackExports = typeof Symbol === \"function\" ? Symbol(\"webpack exports\") : \"__webpack_exports__\";\nvar webpackError = typeof Symbol === \"function\" ? Symbol(\"webpack error\") : \"__webpack_error__\";\nvar resolveQueue = (queue) => {\n\tif(queue && queue.d < 1) {\n\t\tqueue.d = 1;\n\t\tqueue.forEach((fn) => (fn.r--));\n\t\tqueue.forEach((fn) => (fn.r-- ? fn.r++ : fn()));\n\t}\n}\nvar wrapDeps = (deps) => (deps.map((dep) => {\n\tif(dep !== null && typeof dep === \"object\") {\n\t\tif(dep[webpackQueues]) return dep;\n\t\tif(dep.then) {\n\t\t\tvar queue = [];\n\t\t\tqueue.d = 0;\n\t\t\tdep.then((r) => {\n\t\t\t\tobj[webpackExports] = r;\n\t\t\t\tresolveQueue(queue);\n\t\t\t}, (e) => {\n\t\t\t\tobj[webpackError] = e;\n\t\t\t\tresolveQueue(queue);\n\t\t\t});\n\t\t\tvar obj = {};\n\t\t\tobj[webpackQueues] = (fn) => (fn(queue));\n\t\t\treturn obj;\n\t\t}\n\t}\n\tvar ret = {};\n\tret[webpackQueues] = x => {};\n\tret[webpackExports] = dep;\n\treturn ret;\n}));\n__webpack_require__.a = (module, body, hasAwait) => {\n\tvar queue;\n\thasAwait && ((queue = []).d = -1);\n\tvar depQueues = new Set();\n\tvar exports = module.exports;\n\tvar currentDeps;\n\tvar outerResolve;\n\tvar reject;\n\tvar promise = new Promise((resolve, rej) => {\n\t\treject = rej;\n\t\touterResolve = resolve;\n\t});\n\tpromise[webpackExports] = exports;\n\tpromise[webpackQueues] = (fn) => (queue && fn(queue), depQueues.forEach(fn), promise[\"catch\"](x => {}));\n\tmodule.exports = promise;\n\tbody((deps) => {\n\t\tcurrentDeps = wrapDeps(deps);\n\t\tvar fn;\n\t\tvar getResult = () => (currentDeps.map((d) => {\n\t\t\tif(d[webpackError]) throw d[webpackError];\n\t\t\treturn d[webpackExports];\n\t\t}))\n\t\tvar promise = new Promise((resolve) => {\n\t\t\tfn = () => (resolve(getResult));\n\t\t\tfn.r = 0;\n\t\t\tvar fnQueue = (q) => (q !== queue && !depQueues.has(q) && (depQueues.add(q), q && !q.d && (fn.r++, q.push(fn))));\n\t\t\tcurrentDeps.map((dep) => (dep[webpackQueues](fnQueue)));\n\t\t});\n\t\treturn fn.r ? promise : getResult();\n\t}, (err) => ((err ? reject(promise[webpackError] = err) : outerResolve(exports)), resolveQueue(queue)));\n\tqueue && queue.d < 0 && (queue.d = 0);\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","","// startup\n// Load entry module and return exports\n// This entry module used 'module' so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/index.ts\");\n",""],"names":["ContentGenerator","encodeHTML","regex","AutoContentGenerator","prepareTemplate","html","data","fillContent","shadow","str","replace","_","match","value","host","getAttribute","isRessourceReady","waitRessource","template","style","isDOMContentLoaded","whenDOMContentLoaded","sharedCSS","CSSStyleSheet","constructor","css","isReady","prepare","whenReady","Promise","all","then","args","stylesheets","undefined","prepareStyle","Array","isArray","map","e","initContent","target","mode","content","attachShadow","adoptedStyleSheets","push","replaceChildren","createContent","customElements","upgrade","cloneNode","LISSFull","LISS","opts","content_generator","generator","_LISS","SHADOW_MODE","CONTENT_GENERATOR","ILISS","LISSBase","HTMLElement","controler","klass","observedAttributes","attributeChangedCallback","name","oldval","newval","default","LISSUpdate","Signal","getPropertyInitialValue","LISSSignal","requestUpdate","signal","source","listen","observer","observe","processIntersectionObserver","entries","i","length","isVisible","isIntersecting","cancelAnimationFrame","requestAnimationFrame","onUpdate","IntersectionObserver","define","WaitingDefine","isPageLoaded","whenPageLoaded","fetchText","execute","script","document","querySelector","LISS_MODE","DEFAULT_CDIR","SW_PATH","autoload","cdir","SW","resolve","console","warn","navigator","serviceWorker","register","scope","error","controller","addEventListener","MutationObserver","mutations","mutation","addition","addedNodes","addTag","childList","subtree","elem","querySelectorAll","tag","tagname","tagName","toLowerCase","has","get","loadComponent","add","true_tagdir","LISSContext","override_tags","compo_dir","files","promises","defineWebComponent","origin","_whenDefinedPromises","Set","Klass","delete","p","isDefined","whenDefined","getName","WeakMap","withResolvers","set","promise","ROSignal","IndirectSignal","_valueRead","_callback","trigger","unlisten","ack","SignalEvent","callback","_value","oldValue","defaultValue","Object","hasOwn","readyState","converter","createElement","text","textContent","innerHTML","executeJS","code","type","Error","file","Blob","url","URL","createObjectURL","id","slice","lastIndexOf","globalThis","url_map","result","revokeObjectURL","uri","hide404","fetchContext","fetch","path","cwd","toString","options","headers","response","status","answer","require","stack","caller","startsWith","split","indexOf","res","every","Response","isTemplateString","df","raw","string","childNodes","firstChild","HTMLStyleElement","sheet","trace","replaceSync","DocumentFragment","trim","append","waitFrame","assertElement","shadow_html","shadowRoot","selector","expected","sub_elems","sub_elem","getComputedStyle","propname","val","getPropertyValue","V3"],"sourceRoot":""}