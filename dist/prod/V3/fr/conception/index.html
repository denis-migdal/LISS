<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf8"/>
        <title>LISS</title>
        <meta name="color-scheme" content="dark light">
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <link   href="/V3/skeleton/liss/index.css"  rel="stylesheet">
        <script  src="/V3/skeleton/liss/index.js"  type="module"     blocking="render" async></script>
    </head>
    <body code-langs="js,bry">
        <main>

<h1 id="concevoir-un-composant-web">Concevoir un composant Web</h1>
<p>Il est important de correctement concevoir ses composants Web. Une bonne conception permet de limiter le risque de bugs, et facilite leur d√©veloppement, maintenance, d√©bogage, et utilisation.</p>
<h2 id="responsabilit√©-unique">Responsabilit√© unique</h2>
<p>Un composant Web ne doit avoir qu&#39;une, et une seule, responsabilit√© : usuellement celle d&#39;afficher des donn√©es. Un tel composant Web ne doit alors pas √™tre utilis√© pour e.g. acc√©der, g√©n√©rer, r√©cup√©rer, ou modifier des donn√©es. Il prend donc g√©n√©ralement en entr√©e des donn√©es, qu&#39;il se contente d&#39;afficher.</p>
<p>De cela en d√©coule que les attributs et contenu de l&#39;h√¥te, utilis√©s comme donn√©es d&#39;entr√©es par le composant Web, ne doivent en aucun cas √™tre modifi√©s par ce dernier. On peut alors voir un composant Web comme une fonction qui prend en entr√©e l&#39;h√¥te, et qui √©crit sa sortie dans un <script type="c-js">ShadowRoot</script>.</p>
<p>üí° Dans certains rares cas, le composant Web ne va pas √©crire sa sortie dans <script type="c-js">ShadowRoot</script>, mais dans le contenu de l&#39;h√¥te. Dans ce cas, le composant Web ne doit pas utiliser le contenu de l&#39;h√¥te comme entr√©e.</p>
<p>üí° class =&gt; internals (TODO)</p>
<h2 id="structure-de-donn√©es-en-entr√©e">Structure de donn√©es en entr√©e</h2>
<p>Le composant Web peut aussi prendre en entr√©e une structure de donn√©es, permettant alors leur utilisation √† diff√©rents endroits, pour diff√©rents usages (e.g. affichages, calculs, etc).</p>
<p>Les attributs de l&#39;h√¥te peuvent alors √™tre utilis√©s pour configurer l&#39;affichage, ou pour surcharger des propri√©t√©s de la structure de donn√©es. Il convient d&#39;√©viter de tenter de synchroniser les attributs avec la structure de donn√©es, ce afin de respecter les principes pr√©c√©demment √©nonc√©s.</p>
<p>üí° Pour d√©tecter les changements dans la structure de donn√©es utilis√©e comme entr√©e, cf signaux (TODO) + modif + cste.</p>
<h2 id="le-probl√®me-de-la-mise-√†-niveau">Le probl√®me de la mise √† niveau</h2>
<p>√Ä sa cr√©ation, le composant Web est un <script type="c-html">HTMLUnknownElement</script>. Ce n&#39;est que lors de sa mise √† niveau qu&#39;il devient le composant Web &quot;complet&quot;. Il est donc possible de manipuler le composant Web comme un <script type="c-html">HTMLElement</script> (i.e. changer ses attributs, le contenu de l&#39;h√¥te, etc.) qu&#39;il soit mis √† niveau ou non.</p>
<p>En revanche, les propri√©t√©s ajout√©es par le composant Web (e.g. m√©thodes) ne sont disponibles qu&#39;une fois le composant Web mis √† niveau. Il serait alors n√©cessaire de s&#39;assurer que le composant Web est bien mis √† niveau avant de l&#39;utiliser en tant que tel. Cela peut donc √™tre source d&#39;erreurs.</p>
<p>Il n&#39;est aussi pas ais√© de s&#39;en assurer de mani√®re synchrone (e.g. dans un constructeur). Il faut alors contr√¥ler l&#39;ordre de mise √† niveau (et donc de d√©finition) des composants Web.</p>
<p>Il convient ainsi de manipuler le composant Web comme s&#39;il ne sera jamais mis √† niveau, i.e. de se contenter de le manipuler comme un <script type="c-html">HTMLElement</script> normal.</p>
<p>[todo: content for astuces]</p>
<h2 id="h√©ritage">H√©ritage</h2>
<p>Il est techniquement possible de cr√©er un composant Web h√©ritant  d&#39;un √©l√©ment HTML existant (e.g. <script type="c-html"><img/></script>). Cependant, cela est fortement d√©conseill√© :</p>
<ul>
<li>ce n&#39;est pas support√© par certains navigateurs ;</li>
<li>certains √©l√©ments HTML ne supportent pas les <script type="c-js">ShadowRoot</script> ;</li>
<li>ils ne supportent pas les <script type="c-js">ElementInternals</script>.</li>
</ul>
<h2 id="chargement">Chargement...</h2>
<p>Lorsque le composant Web n&#39;est pas encore mis √† niveau, le contenu de l&#39;h√¥te s&#39;affiche, entra√Ænant potentiellement des effets de scintillements.</p>
<p>Il est possible de corriger cela via une simple r√®gle CSS :</p>
<script type="c-css">
:not(:defined) {
    visibility: hidden;

    &::after {
        /* loading */
    }
}
</script>

<ul>
<li>blocking=&quot;render&quot; (FF not implemented) (peut aider)</li>
</ul>
</main>
    </body>
</html>