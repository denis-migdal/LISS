{"version":3,"file":"libs/LISS/index.js","mappings":"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","sources":["webpack://LISS/webpack/runtime/async module","webpack://LISS/./V3/libs/LISS/index.ts","webpack://LISS/./V3/src/ContentGenerators/AutoContentGenerator.ts","webpack://LISS/./V3/src/ContentGenerators/ContentGenerator.ts","webpack://LISS/./V3/src/LISS.ts","webpack://LISS/./V3/src/LISSClasses/LISSBase.ts","webpack://LISS/./V3/src/LISSClasses/LISSSignal.ts","webpack://LISS/./V3/src/LISSClasses/LISSUpdate.ts","webpack://LISS/./V3/src/define/autoload.ts","webpack://LISS/./V3/src/define/define.ts","webpack://LISS/./V3/src/define/index.ts","webpack://LISS/./V3/src/define/isDefined.ts","webpack://LISS/./V3/src/define/whenDefined.ts","webpack://LISS/./V3/src/index.ts","webpack://LISS/./V3/src/signals/IndirectSignal.ts","webpack://LISS/./V3/src/signals/ROSignal.ts","webpack://LISS/./V3/src/signals/Signal.ts","webpack://LISS/./V3/src/signals/SignalEvent.ts","webpack://LISS/./V3/src/utils/DOM/getPropertyInitialValue.ts","webpack://LISS/./V3/src/utils/DOM/isDOMContentLoaded.ts","webpack://LISS/./V3/src/utils/DOM/isPageLoaded.ts","webpack://LISS/./V3/src/utils/DOM/whenDOMContentLoaded.ts","webpack://LISS/./V3/src/utils/DOM/whenPageLoaded.ts","webpack://LISS/./V3/src/utils/encode.ts","webpack://LISS/./V3/src/utils/execute/bry.ts","webpack://LISS/./V3/src/utils/execute/index.ts","webpack://LISS/./V3/src/utils/execute/js.ts","webpack://LISS/./V3/src/utils/network/fetchText.ts","webpack://LISS/./V3/src/utils/network/require.ts","webpack://LISS/./V3/src/utils/network/ressource.ts","webpack://LISS/./V3/src/utils/parsers/html.ts","webpack://LISS/./V3/src/utils/parsers/index.ts","webpack://LISS/./V3/src/utils/parsers/isTemplateString.ts","webpack://LISS/./V3/src/utils/parsers/style.ts","webpack://LISS/./V3/src/utils/parsers/template.ts","webpack://LISS/./V3/src/utils/tests/assertElement.ts","webpack://LISS/webpack/bootstrap","webpack://LISS/webpack/runtime/define property getters","webpack://LISS/webpack/runtime/hasOwnProperty shorthand","webpack://LISS/webpack/startup"],"sourcesContent":["var webpackQueues = typeof Symbol === \"function\" ? Symbol(\"webpack queues\") : \"__webpack_queues__\";\nvar webpackExports = typeof Symbol === \"function\" ? Symbol(\"webpack exports\") : \"__webpack_exports__\";\nvar webpackError = typeof Symbol === \"function\" ? Symbol(\"webpack error\") : \"__webpack_error__\";\nvar resolveQueue = (queue) => {\n\tif(queue && queue.d < 1) {\n\t\tqueue.d = 1;\n\t\tqueue.forEach((fn) => (fn.r--));\n\t\tqueue.forEach((fn) => (fn.r-- ? fn.r++ : fn()));\n\t}\n}\nvar wrapDeps = (deps) => (deps.map((dep) => {\n\tif(dep !== null && typeof dep === \"object\") {\n\t\tif(dep[webpackQueues]) return dep;\n\t\tif(dep.then) {\n\t\t\tvar queue = [];\n\t\t\tqueue.d = 0;\n\t\t\tdep.then((r) => {\n\t\t\t\tobj[webpackExports] = r;\n\t\t\t\tresolveQueue(queue);\n\t\t\t}, (e) => {\n\t\t\t\tobj[webpackError] = e;\n\t\t\t\tresolveQueue(queue);\n\t\t\t});\n\t\t\tvar obj = {};\n\t\t\tobj[webpackQueues] = (fn) => (fn(queue));\n\t\t\treturn obj;\n\t\t}\n\t}\n\tvar ret = {};\n\tret[webpackQueues] = x => {};\n\tret[webpackExports] = dep;\n\treturn ret;\n}));\n__webpack_require__.a = (module, body, hasAwait) => {\n\tvar queue;\n\thasAwait && ((queue = []).d = -1);\n\tvar depQueues = new Set();\n\tvar exports = module.exports;\n\tvar currentDeps;\n\tvar outerResolve;\n\tvar reject;\n\tvar promise = new Promise((resolve, rej) => {\n\t\treject = rej;\n\t\touterResolve = resolve;\n\t});\n\tpromise[webpackExports] = exports;\n\tpromise[webpackQueues] = (fn) => (queue && fn(queue), depQueues.forEach(fn), promise[\"catch\"](x => {}));\n\tmodule.exports = promise;\n\tbody((deps) => {\n\t\tcurrentDeps = wrapDeps(deps);\n\t\tvar fn;\n\t\tvar getResult = () => (currentDeps.map((d) => {\n\t\t\tif(d[webpackError]) throw d[webpackError];\n\t\t\treturn d[webpackExports];\n\t\t}))\n\t\tvar promise = new Promise((resolve) => {\n\t\t\tfn = () => (resolve(getResult));\n\t\t\tfn.r = 0;\n\t\t\tvar fnQueue = (q) => (q !== queue && !depQueues.has(q) && (depQueues.add(q), q && !q.d && (fn.r++, q.push(fn))));\n\t\t\tcurrentDeps.map((dep) => (dep[webpackQueues](fnQueue)));\n\t\t});\n\t\treturn fn.r ? promise : getResult();\n\t}, (err) => ((err ? reject(promise[webpackError] = err) : outerResolve(exports)), resolveQueue(queue)));\n\tqueue && queue.d < 0 && (queue.d = 0);\n};","import LISS from \"@LISS/src/LISS\";\n\nimport \"@LISS/src/define\";\nimport \"@LISS/src/define/autoload\";\n\nimport \"@LISS/src/utils/parsers\";\nimport \"@LISS/src/utils/network/require\";\n\nimport \"@LISS/src/utils/tests/assertElement\";\n\ndeclare module \"@LISS/src/LISS\" {\n    interface ILISS {\n        VERSION: string\n    }\n}\n\nLISS.VERSION = \"V3\";\n\nexport default LISS;\n\n// @ts-ignore\nglobalThis.LISS = LISS;","import { HTML } from \"@LISS/src/utils/parsers/template\";\nimport ContentGenerator from \"./ContentGenerator\";\nimport encodeHTML from \"@LISS/src/utils/encode\";\n\nconst regex = /\\$\\{(.+?)\\}/g;\n\nexport default class AutoContentGenerator extends ContentGenerator {\n\n    protected override prepareTemplate(html: HTML) {\n        \n        this.data = null;\n\n        if( typeof html === 'string' ) {\n            this.data = html;\n            return;\n            /*\n            html = html.replaceAll(/\\$\\{([\\w]+)\\}/g, (_, name: string) => {\n                return `<liss value=\"${name}\"></liss>`;\n            });*/\n\n            //TODO: ${} in attr\n                // - detect start ${ + end }\n                // - register elem + attr name\n                // - replace. \n        }\n        \n        super.prepareTemplate(html);\n    }\n\n    override fillContent(shadow: ShadowRoot) {\n        \n        // https://stackoverflow.com/questions/29182244/convert-a-string-to-a-template-string\n        if( this.data !== null) {\n            const str = (this.data as string).replace(regex, (_, match) => {\n                const value = shadow.host.getAttribute(match);\n                if( value === null)\n                    return ''; \n                return encodeHTML(value);\n            });\n\n            super.prepareTemplate(str);\n        }\n\n        super.fillContent(shadow);\n\n        /*\n        // html magic values could be optimized...\n        const values = content.querySelectorAll('liss[value]');\n        for(let value of values)\n            value.textContent = host.getAttribute(value.getAttribute('value')!)\n        */\n    }\n}","import { isRessourceReady, Ressource, waitRessource } from \"@LISS/src/utils/network/ressource\";\nimport template, { HTML }   from \"@LISS/src/utils/parsers/template\";\nimport style   , {CSS}      from \"@LISS/src/utils/parsers/style\";\nimport isDOMContentLoaded   from \"@LISS/src/utils/DOM/isDOMContentLoaded\";\nimport whenDOMContentLoaded from \"@LISS/src/utils/DOM/whenDOMContentLoaded\";\n\ntype STYLE = CSS | CSS[];\n\nexport type ContentGenerator_Opts = {\n    html   ?: Ressource<HTML>,\n    css    ?: Ressource<STYLE>\n}\n\nconst sharedCSS = new CSSStyleSheet();\n//const sharedCSS = getSharedCSS(); // from LISSHost...\n\nexport default class ContentGenerator {\n\n    protected data: any;\n\n    constructor({\n        html,\n        css    = [],\n    }: ContentGenerator_Opts = {}) {\n\n        const isReady = isRessourceReady<HTML> (html)\n                     && isRessourceReady<STYLE>(css)\n                     && isDOMContentLoaded();\n\n        if( isReady )\n            this.prepare(html, css);\n\n        const whenReady: Promise<[HTML|undefined, STYLE|undefined, unknown]> = Promise.all([\n            waitRessource<HTML |undefined>(html),\n            waitRessource<STYLE|undefined>(css),\n            whenDOMContentLoaded()\n        ]);\n\n        whenReady.then( (args) => this.prepare(args[0], args[1]) );\n\n        this.isReady   = isReady;\n        this.whenReady = whenReady;\n    }\n\n    /** ready ***/\n\n    readonly whenReady: Promise<unknown>;\n    readonly isReady  : boolean = false;\n\n    /** process ressources **/\n\n    protected stylesheets: CSSStyleSheet[]       = [];\n    protected template   : DocumentFragment|null = null;\n\n    protected prepare(html: HTML|undefined, css: STYLE|undefined) {\n        if( html !== undefined )\n            this.prepareTemplate(html);\n        if( css  !== undefined )\n            this.prepareStyle   (css);\n    }\n\n    protected prepareTemplate(html: HTML) {\n        this.template = template(html);\n    }\n    protected prepareStyle(css: STYLE) {\n\n        if( ! Array.isArray(css) )\n            css = [css];\n\n        this.stylesheets = css.map(e => style(e) );\n    }\n\n    /*** Generate contents ***/\n\n    initContent(target: HTMLElement, mode:\"open\"|\"closed\"|null) {\n\n        let content: ShadowRoot|HTMLElement = target;\n        if( mode !== null) {\n            content = target.attachShadow({mode});\n            content.adoptedStyleSheets.push(sharedCSS, ...this.stylesheets);\n        }\n        //TODO: CSS for no shadow ???\n        \n        this.fillContent(content);\n\n        return content;\n    }\n\n    fillContent(target: ShadowRoot|HTMLElement|DocumentFragment) {\n        \n        if( this.template !== null)\n            target.replaceChildren( this.createContent() );\n\n        //TODO...\n        customElements.upgrade(target);\n    }\n\n    createContent() {\n        return this.template!.cloneNode(true);\n    }\n}","import ContentGenerator from \"@LISS/src/ContentGenerators/ContentGenerator\";\nimport LISSFull         from \"@LISS/src/LISSClasses/LISSFull\";\nimport LISSBase from \"./LISSClasses/LISSBase\";\n\ntype Cstr<T> = new(...args:any[]) => T\ntype LISSv3_Opts<T extends Cstr<ContentGenerator> > = {\n    content_generator: T,\n    shadow           : \"null\"|\"open\"|\"closed\"\n} & ConstructorParameters<T>[0];\n\n//  builder\nfunction LISS<\n        T extends Cstr<ContentGenerator> = Cstr<ContentGenerator>,\n        U extends typeof LISSBase        = typeof LISSFull\n    >\n    (opts: Partial<LISSv3_Opts<T>> = {}, base?: U): U {\n    \n    base ??= LISSFull as unknown as U;\n\n    const content_generator = opts.content_generator ?? ContentGenerator;\n    // @ts-ignore\n    const generator: ContentGenerator = new content_generator(opts);\n    \n    let shadow = opts.shadow;\n    if( shadow === undefined)\n        shadow = \"open\"\n\n    // @ts-ignore\n    return class LISSBase extends base {\n\n        // TODO: no content if... ???\n        // override attachShadow  ???\n        static override readonly SHADOW_MODE       = shadow;\n        static override readonly CONTENT_GENERATOR = generator;\n\n    }\n}\n\n// used for plugins.\nexport class ILISS {}\nexport default LISS as typeof LISS & ILISS;","import ContentGenerator from \"@LISS/src/ContentGenerators/ContentGenerator\";\n\nexport default class LISSBase extends HTMLElement {\n\n    static readonly SHADOW_MODE      : \"open\"|\"closed\"|null = null;\n    // TODO: static cache getter + use static HTML/CSS.\n    static readonly CONTENT_GENERATOR: ContentGenerator|null = null;\n\n    readonly content  : ShadowRoot|HTMLElement        = this;\n    readonly host     : HTMLElement                   = this;\n    readonly controler: Omit<this, keyof HTMLElement> = this;\n\n    constructor() {\n        super();\n\n        const klass = this.constructor as typeof LISSBase;\n\n        if( klass.CONTENT_GENERATOR !== null )\n            this.content = klass.CONTENT_GENERATOR.initContent(this, klass.SHADOW_MODE);\n    }\n\n\n    // define for auto-complete.\n    static observedAttributes: string[] = [];\n    attributeChangedCallback(name: string, oldval: string|null, newval: string|null){}\n}","import Signal     from \"@LISS/src/signals/Signal\";\nimport ROSignal   from \"@LISS/src/signals/ROSignal\";\nimport LISSUpdate from \"./LISSUpdate\";\nimport getPropertyInitialValue from \"@LISS/src/utils/DOM/getPropertyInitialValue\";\n\nexport default class LISSSignal<T> extends LISSUpdate {\n\n    #signal = new Signal<T>();\n\n    #callback = () => this.requestUpdate();\n\n    constructor(value: null|T|ROSignal<T> = null) {\n        super();\n\n        if( value === null ) {\n            this.#signal.source = getPropertyInitialValue(this, \"source\", null)\n            this.#signal.value  = getPropertyInitialValue(this, \"value\" , null)\n        } else if( value instanceof ROSignal)\n            this.#signal.source = value;\n        else\n            this.#signal.value  = value,\n\n        this.#signal.listen( this.#callback );\n    }\n\n    set source(source: ROSignal<T>|null) {\n        this.#signal.source = source;\n    }\n    get source() {\n        return this.#signal.source;\n    }\n\n    set value(value: T|null) {\n        this.#signal.value = value;\n    }\n    get value() {\n        return this.#signal.value;\n    }\n}","import LISSBase from \"./LISSBase\";\n\nexport default class LISSUpdate extends LISSBase {\n\n    constructor() {\n        super();\n\n        observer.observe(this);\n\n        this.requestUpdate();\n    }\n\n    #requestID: null|number = null;\n    #updateRequested = false;\n    #isVisible       = false;\n\n    static processIntersectionObserver(entries: IntersectionObserverEntry[]) {\n\n        for(let i = 0; i < entries.length; ++i) {\n\n            const target     = entries[i].target as LISSUpdate;\n            const isVisible  = entries[i].isIntersecting;\n\n            target.#isVisible = isVisible;\n\n            if( ! isVisible && target.#requestID !== null)\n                cancelAnimationFrame(target.#requestID);\n\n            if( isVisible && target.#updateRequested && target.#requestID === null )\n                target.#scheduleUpdate();\n        }\n    }\n\n    #scheduleUpdate() {\n        this.#requestID = requestAnimationFrame( () => {\n            this.#requestID       = null;\n            this.#updateRequested = false;\n\n            if( this.#initCalled === false ) {\n                this.#initCalled = true;\n                this.onInit();\n            }\n            this.onUpdate();\n        });\n    }\n\n    requestUpdate() {\n\n        if( this.#updateRequested )\n            return;\n\n        this.#updateRequested = true;\n\n        if( ! this.#isVisible )\n            return;\n\n        this.#scheduleUpdate();\n    }\n\n    #initCalled = false;\n    protected onInit() {\n\n    }\n\n    protected onUpdate() {\n\n    }\n}\n\nconst observer = new IntersectionObserver( LISSUpdate.processIntersectionObserver );","import define, { WaitingDefine } from \"@LISS/src/define/define\";\nimport LISS from \"@LISS/src\";\nimport AutoContentGenerator from \"@LISS/src/ContentGenerators/AutoContentGenerator\";\nimport isPageLoaded   from \"@LISS/src/utils/DOM/isPageLoaded\";\nimport whenPageLoaded from \"@LISS/src/utils/DOM/whenPageLoaded\";\nimport fetchText      from \"@LISS/src/utils/network/fetchText\";\nimport execute        from \"@LISS/src/utils/execute\";\n\nconst script =  document.querySelector<HTMLElement>('script:is([liss-auto],[liss-cdir],[liss-sw],[liss-files])');\n\nfunction parseLISSFiles(files: string|null|undefined) {\n    if( ! files )\n        return [\"js\", \"bry\", \"html+css\"]\n    return files.split(\",\");\n}\n\nexport const LISS_MODE    = script?.getAttribute('liss-mode') ?? null;\nexport const LISS_FILES   = parseLISSFiles( script?.getAttribute('liss-files') );\nexport const DEFAULT_CDIR = script?.getAttribute('liss-cdir') ?? null;\n\n// TODO: default ?\nconst SW_PATH             = script?.getAttribute('liss-sw') ?? null;\n\nif(LISS_MODE === \"auto-load\" && DEFAULT_CDIR !== null) {\n    if( ! isPageLoaded() )\n        await whenPageLoaded();\n    autoload(DEFAULT_CDIR);\n}\n\nexport function autoload(cdir: string) {\n\n    const SW: Promise<void> = new Promise( async (resolve) => {\n\n        if( SW_PATH === null || SW_PATH === \"\") {\n            console.info(\"You are using LISS Auto mode without sw.js.\");\n            return resolve();\n        }\n        \n        try {\n            await navigator.serviceWorker.register(SW_PATH, {scope: \"/V3/assets/\"});\n        } catch(e) {\n            console.warn(\"Registration of ServiceWorker failed\");\n            console.error(e);\n            return resolve();\n        }\n\n        if( navigator.serviceWorker.controller )\n            return resolve();\n\n        navigator.serviceWorker.addEventListener('controllerchange', () => {\n            resolve();\n        });\n    });\n\n    if( cdir[cdir.length-1] !== '/')\n        cdir += '/';\n\n    //const brython = script.getAttribute(\"brython\");\n\n    // observe for new injected tags.\n    new MutationObserver( (mutations) => {\n        for(let mutation of mutations)\n            for(let addition of mutation.addedNodes)\n                if( addition.constructor.name === \"HTMLElement\" )\n                // cf https://github.com/WICG/webcomponents/issues/1097#issuecomment-2665092315\n                // if(addition instanceof HTMLUnknownElement)\n                    addTag(addition as HTMLElement)\n\n    }).observe( document, { childList:true, subtree:true });\n\n    for( let elem of document.querySelectorAll<HTMLElement>(\":not(:defined)\") )\n        addTag( elem );\n\n    async function addTag(tag: HTMLElement) {\n\n        await SW; // ensure SW is installed.\n\n        const tagname = tag.tagName.toLowerCase();\n\n        if(  WaitingDefine.has(tagname)\n            // could be defined, but not yet upgraded\n         || customElements.get(tagname) !== undefined)\n            return;\n\n        loadComponent(tagname, {\n            //brython,\n            cdir\n        });\t\t\n    }\n}\n\n/*****/\n\ntype loadComponent_Opts = {\n\tcdir   ?: string|null\n};\n\ntype Cstr<T> = (...args: any[]) => T;\n\n\nasync function tryFile( compo_dir: string,\n                        ext: string,\n                        target:Record<string,string>): Promise<boolean> {\n\n    // special value...\n    if( ext === \"html+css\") {\n        const promises = [\n            fetchText(`${compo_dir}index.html`, true)!,\n            fetchText(`${compo_dir}index.css` , true)!\n        ];\n\n        let result = await Promise.all(promises);\n\n        if( result[0] === undefined)\n            return false;\n\n        target[\"html\"] = result[0];\n        if( result[1] !== undefined)\n            target[\"css\" ] = result[1];\n\n        return true;\n    }\n\n    const result = await fetchText(`${compo_dir}index.${ext}`, true);\n\n    if( result === undefined )\n        return false;\n\n    target[ext] = result;\n\n    return true;\n}\n\nexport async function loadComponent<T extends HTMLElement = HTMLElement>(\n\ttagname: string,\n\t{\n\t\tcdir    = DEFAULT_CDIR,\n\t\t// brython = null\n\t}: loadComponent_Opts = {}\n): Promise<Cstr<T>> {\n\n\tWaitingDefine.add(tagname);\n\n    // @ts-ignore\n    let true_tagdir = globalThis.LISSContext?.override_tags?.[tagname] ?? tagname;     \n\n\tconst compo_dir = `${cdir}${true_tagdir}/`;\n\n    const files: Record<string,string> = {};\n    let found = false;\n    for(let file of LISS_FILES)\n        if( found = await tryFile(compo_dir, file, files) )\n            break;\n\n    if( ! found )\n        throw new Error(`No files found for webcomponent ${tagname}`)\n\n\treturn await defineWebComponent(tagname, files, compo_dir);\n}\n\n//TODO: rename from files ?\nasync function defineWebComponent(tagname: string,\n                                  files: Record<string, any>,\n                                  origin : string,\n                                ) {\n    \n    let klass;\n    if( files[\"js\"]  !== undefined )\n        klass = (await execute<any>(files[\"js\"], \"js\", origin)).default;\n    if( files[\"bry\"] !== undefined )\n        klass = (await execute<any>(files[\"bry\"], \"bry\", origin)).default;\n\n    if( klass === undefined )\n        klass = LISS({\n            content_generator: AutoContentGenerator,\n            ...files\n        });\n\n    define(tagname, klass);\n\n    return klass;\n}","import ContentGenerator from \"@LISS/src/ContentGenerators/ContentGenerator\";\nimport { _whenDefinedPromises } from \"./whenDefined\";\n\nexport const WaitingDefine = new Set<string>();\n\nexport default async function define(tagname: string, Klass: new(...args:any[]) => HTMLElement) {\n    \n    if( \"$is_class\" in Klass )\n        Klass = WrapPythonClass(Klass);\n\n    //TODO: type safe\n    if( \"CONTENT_GENERATOR\" in Klass ) {\n        const generator = Klass.CONTENT_GENERATOR as ContentGenerator;\n\n        if( ! generator.isReady ) {\n            WaitingDefine.add(tagname);\n            await generator.whenReady;\n        }\n    }\n\n    WaitingDefine.delete(tagname);\n    customElements.define(tagname, Klass);\n\n    const p = _whenDefinedPromises.get(Klass);\n    if( p !== undefined )\n        p.resolve();\n}\n\n\nfunction WrapPythonClass(Klass: new(...args:any[]) => HTMLElement) {\n\n    const JSKlass = (Klass as any).__bases__.filter( (e: any) => e.__name__ === \"Wrapper\")[0]._js_klass.$js_func as new(...args:any[]) => HTMLElement;\n\n    // @ts-ignore\n    const symbol = __BRYTHON__.PYOBJ;\n\n    // make it a proxy ?\n    return class _Wrapper extends JSKlass {\n        #bry: any;\n\n        // should always be built before end of brython init...\n        constructor(bry: any = null) {\n            super();\n\n            if( bry === null ) {\n                // @ts-ignore\n                globalThis.brython_wrapper_js = this;\n                // @ts-ignore\n                bry = __BRYTHON__.$call(Klass, [0,0,0])();\n                // @ts-ignore\n                globalThis.brython_wrapper_js = null;\n            }\n            this.#bry = bry;\n\n            // @ts-ignore\n            this[symbol] = bry;\n        }\n\n        #call(name: string, ...args: any[]) {\n            // @ts-ignore\n            return __BRYTHON__.$call(__BRYTHON__.$getattr_pep657(this.#bry, name, [0,0,0]), [0,0,0])(...args)\n        }\n\n        /*\n        get host() {\n            // @ts-ignore\n            return __BRYTHON__.$getattr_pep657(this.#bry, \"host\", [0,0,0])\n        }*/\n\n        static observedAttributes = (Klass as any)[\"observedAttributes\"];\n\n        attributeChangedCallback(...args: any[]) {\n            return this.#call(\"attributeChangedCallback\", ...args);\n        }\n/*\n        connectedCallback(...args: any[]) {\n            return this.#call(\"connectedCallback\", args);\n        }\n        disconnectedCallback(...args: any[]) {\n            return this.#call(\"disconnectedCallback\", args);\n        }*/\n    }\n}","import define      from \"./define\";\nimport isDefined   from \"./isDefined\";\nimport whenDefined from \"./whenDefined\";\n\nimport LISS from \"@LISS/src/LISS\";\n\ndeclare module \"@LISS/src/LISS\" {\n    interface ILISS {\n        define      : typeof define;\n        isDefined   : typeof isDefined;\n        whenDefined : typeof whenDefined;\n    }\n}\n\nLISS.define      = define;\nLISS.isDefined   = isDefined;\nLISS.whenDefined = whenDefined;\n\nexport {define, isDefined, whenDefined};","export default function isDefined(elem: string|(new(...args:any[])=>HTMLElement)): boolean {\n    \n    if( typeof elem === \"string\")\n        return customElements.get(elem) !== undefined;\n\n    return customElements.getName(elem) !== null;\n}","type Cstr<T> = new(...args:any[])=> T;\n\nexport const _whenDefinedPromises = new WeakMap<Cstr<HTMLElement>, PromiseWithResolvers<void>>();\n\nexport default async function whenDefined<T extends HTMLElement>(elem: string|Cstr<T>): Promise<Cstr<T>> {\n    \n    if( typeof elem === \"string\")\n        return await customElements.whenDefined(elem) as Cstr<T>;\n\n    if( customElements.getName(elem) !== null)\n        return elem as Cstr<T>;\n\n    let p = _whenDefinedPromises.get(elem);\n    if( p === undefined ){\n        p = Promise.withResolvers<void>();\n        _whenDefinedPromises.set(elem, p);\n    }\n\n    await p.promise;\n    return elem;\n}","import LISS from \"@LISS/src/LISS\";\n\nimport \"@LISS/src/define\";\nimport \"@LISS/src/define/autoload\";\n\nimport \"@LISS/src/utils/parsers\";\nimport \"@LISS/src/utils/network/require\";\n\nimport \"@LISS/src/utils/tests/assertElement\";\n\ndeclare module \"@LISS/src/LISS\" {\n    interface ILISS {\n        VERSION: string\n    }\n}\n\nLISS.VERSION = \"V3\";\n\nexport default LISS;\n\n// @ts-ignore\nglobalThis.LISS = LISS;","import ROSignal from \"./ROSignal\";\n\nexport default class IndirectSignal<T = unknown, U = T> extends ROSignal<U> {\n\n    #source: ROSignal<T>|null = null;\n\n    constructor(source: ROSignal<T>|null = null) {\n        super();\n\n        this.#source = source;\n        this.#source?.listen( this._callback );\n    }\n\n    protected _callback = () => this.trigger();\n\n    get source(): ROSignal<T>|null {\n        return this.#source;\n    }\n\n    set source(source: ROSignal<T>|null) {\n\n        if( this.#source === source ) // nop\n            return;\n\n        if( this.#source !== null)\n            this.#source.unlisten(this._callback);\n\n        this.#source = source;\n\n        if( this.#source !== null)\n           this.#source.listen(this._callback);\n        else\n            this._callback();\n    }\n\n    override get value(): U|null {\n\n        this.ack();\n\n        if( this.#source === null)\n            return null;\n        return this.#source.value as U|null;\n    }\n}","import SignalEvent from \"./SignalEvent\";\n\nexport default abstract class ROSignal<T> extends SignalEvent {\n\n    protected _valueRead = false;\n\n    override listen(callback: (pthis: SignalEvent) => void) {\n        \n        super.listen(callback);\n\n        callback(this); // initial callback (when signal Data)\n\n        return this;\n    }\n\n    abstract readonly value: T|null;\n\n    protected override trigger(): this {\n        \n        // no needs to trigger if previous value wasn't read.\n        if( ! this._valueRead )\n            return this;\n\n        this._valueRead = false;\n        super.trigger();\n\n        return this;\n    }\n\n    ack() {\n        this._valueRead = true;\n    }\n}","import IndirectSignal from \"./IndirectSignal\";\nimport ROSignal from \"./ROSignal\";\n\nexport default class Signal<T> extends IndirectSignal<T> {\n\n    protected _value: T|null = null;\n\n    constructor(value: T|null = null, source: ROSignal<T>|null = null) {\n        super(source);\n        this._value = value;\n    }\n\n    override set source(source: ROSignal<T>|null) {\n\n        if( source !== null )\n            this._value = null;\n\n        super.source = source; // may trigger if source change\n    }\n\n    override get source() {\n        return super.source;\n    }\n\n    override get value() {\n\n        if( this.source !== null)\n            return super.value;\n\n        this.ack();\n        return this._value;\n    }\n\n    override set value(value: T|null) {\n\n        const oldValue = this._value;\n        this._value = value;\n\n        if( this.source !== null ) {\n            this.source = null; // will trigger\n            return;\n        }\n\n        // trigger only if value changed\n        if( value !== oldValue)\n            this.trigger();\n\n        return;\n    }\n}","\nexport default class SignalEvent {\n\n    #callbacks = new Array<(pthis: SignalEvent) => void>();\n\n    listen(callback: (pthis: SignalEvent) => void) {\n        this.#callbacks.push(callback);\n\n        return this;\n    }\n    unlisten(callback: (pthis: SignalEvent) => void) {\n\n        // do not guarantee order ?\n        const idx = this.#callbacks.lastIndexOf(callback);\n        if( idx === -1 )\n            return this;\n\n        if( idx !== this.#callbacks.length - 1 )\n            this.#callbacks[idx] = this.#callbacks[this.#callbacks.length-1];\n\n        --this.#callbacks.length;\n\n        return this;\n    }\n\n    protected trigger() {\n\n        for(let i = 0; i < this.#callbacks.length; ++i)\n            this.#callbacks[i](this);\n\n        return this;\n    }\n}","export default function getPropertyInitialValue<E extends HTMLElement,\n                                                N extends keyof E,\n                                                D = undefined>\n                                (e: E, name: N, defaultValue?: D): D|E[N] {\n\n    if( ! Object.hasOwn(e, name) )\n        return defaultValue as D;\n\n    const  _ = e[name];\n    delete     e[name];\n    return _;\n}","export default function isDOMContentLoaded() {\n    return document.readyState === \"interactive\" || document.readyState === \"complete\";\n}","export default function isPageLoaded() {\n    return document.readyState === \"complete\"\n}","import isDOMContentLoaded from \"./isDOMContentLoaded\";\n\nexport default async function whenDOMContentLoaded() {\n    if( isDOMContentLoaded() )\n        return;\n\n    const {promise, resolve} = Promise.withResolvers<void>()\n\n\tdocument.addEventListener('DOMContentLoaded', () => {\n\t\tresolve();\n\t}, true);\n\n    await promise;\n}","import isPageLoaded from \"./isPageLoaded\";\n\nexport default async function whenDOMContentLoaded() {\n    if( isPageLoaded() )\n        return;\n\n    const {promise, resolve} = Promise.withResolvers<void>()\n\n\tdocument.addEventListener('load', resolve as any, true);\n\n    await promise;\n}","const converter = document.createElement('span');\n\nexport default function encodeHTML(text: string) {\n\tconverter.textContent = text;\n\treturn converter.innerHTML;\n}","import executeJS from \"./js\";\n\n// @ts-ignore\nglobalThis.getProp = function(target, name) {\n    return target[name];\n}\n\n// can't use WebPack require() if we want to use it directly...\nconst bry_wrapper = `from browser import self\n\ndef wrapjs(js_klass):\n\n\tclass Wrapper:\n\n\t\t_js_klass = js_klass # TODO: replace ?\n\t\t_js       = None\n\n\t\tdef __new__(cls):\n\t\t\tthis = super().__new__(cls)\n\n\t\t\tif \"brython_wrapper_js\" in self:\n\t\t\t\tthis._js = self.brython_wrapper_js\n\t\t\telse:\n\t\t\t\t# TODO: set it during define...\n\t\t\t\tthis._js = this._js_klass.new() # no args\n\t\t\treturn this\n\n\t\tdef __getattr__(this, name: str):\n\t\t\t#print( name in this._js, dir(this._js) )\n\t\t\treturn self.getProp(this._js, name)\n\t\t\t#return this._js[name]\n\n\t\tdef __setattr__(this, name: str, value):\n\t\t\tif name == \"_js\":\n\t\t\t\tsuper().__setattr__(name, value)\n\t\t\t\treturn\n\t\t\tthis._js[name] = value\n\t\n\treturn Wrapper\n\nself.wrapjs = wrapjs`;\n\nlet wrapper_loaded = false;\n\nexport default async function executeBry<T>(code: string, origin: string): Promise<T> {\n\n    if( ! wrapper_loaded ) {\n        await executeJS(`globalThis.__BRYTHON__.runPythonSource(\\`${bry_wrapper}\\`, \"_\")`);\n        wrapper_loaded = true;\n    }\n\n    // Brython library needs to have been loaded.\n    const jscode = `const $B = globalThis.__BRYTHON__;\n\n$B.runPythonSource(\\`${code}\\`, \"_\");\n\nconst module = $B.imported[\"_\"];\nexport default module.DefaultExport;`;\n\n    return await executeJS(jscode, origin);\n}","import executeBry from \"./bry\";\nimport executeJS from \"./js\";\n\nconst EXEC = {\n    js : executeJS,\n    bry: executeBry\n}\n\nexport default async function execute<T>(code: string, type: \"js\"|\"bry\", origin: string): Promise<T> {\n\n    return await EXEC[type]<T>(code, origin);\n}","export default async function executeJS<T>(code: string, origin?: string): Promise<T> {\n\n    const file = new Blob([code], { type: 'application/javascript' });\n    const url  = URL.createObjectURL(file);\n\n    if( origin !== undefined) {\n        const id = url.slice(url.lastIndexOf('/') + 1 );\n        ((globalThis.LISSContext ??={}).execute ??= {url_map: {}}).url_map[id] = origin;\n    }\n\n    const result = (await import(/* webpackIgnore: true */ url));\n    \n    URL.revokeObjectURL(url);\n\n    return result as unknown as T;\n}\n\n\ndeclare global {\n\n    interface LISSContext {\n        execute?: {\n            url_map: Record<string, string>\n        }\n    }\n\n    var LISSContext: LISSContext;\n    \n}","// in auto-mode use ServiceWorker to hide 404 error messages.\n// if playground files, use them.\nexport default async function fetchText(uri: string|URL, hide404: boolean = false) {\n\n    const fetchContext = globalThis.LISSContext?.fetch;\n    if( fetchContext !== undefined ) { // for the playground\n        const path = new URL(uri, fetchContext.cwd );\n        const value = fetchContext.files[path.toString()];\n\n        if( value === \"\" )\n            return undefined;\n        if( value !== undefined)\n            return value;\n    }\n\n    const options = hide404\n                        ? {headers:{\n                            \"liss-auto\": \"true\", //TODO: remove\n                            \"hide-404\" : \"true\"\n                        }}\n                        : {};\n\n    const response = await fetch(uri, options);\n    if(response.status !== 200 )\n        return undefined;\n\n    if( hide404 && response.headers.get(\"status\")! === \"404\" )\n        return undefined;\n\n    const answer = await response.text();\n\n    if(answer === \"\")\n        return undefined;\n\n    return answer\n}\n\n\n\ndeclare global {\n\n    interface LISSContext {\n        fetch?: {\n            cwd  : string,\n            files: Record<string, string>\n        }\n    }\n\n    var LISSContext: LISSContext;\n}","import fetchText from \"./fetchText\";\n\n// @ts-ignore\nglobalThis.require = async function(url: string) {\n\n    const stack = new Error().stack!;\n\n    let caller: string;\n    if( stack.startsWith(\"Error\") ) {   // Chrome ?\n        caller = stack.split('\\n')[1+1].slice(7);\n    } else {                            // FF ?\n        caller = stack.split('\\n')[1].slice(1);\n    }\n\n    if( caller.startsWith('blob:') ) {\n\n        caller = caller.slice(caller.lastIndexOf('/') + 1 );\n        caller = caller.slice(0, caller.indexOf(':'));\n\n        url = LISSContext.execute!.url_map[caller] + url;\n        \n        //TODO: rewrite URL...\n    } else {\n        console.warn( caller );\n        throw new Error(\"require from non-blob import, unimplemented\");\n    }\n\n    // TODO: reverify playground\n\n    return await fetchText(url);\n}","export type Ressource<T> =\n      T\n    | Promise<T>\n    | (T extends string         ? Promise<Response> | Response : never)\n    | (T extends Array<infer E> ? Ressource<E>[]               : never);\n\nexport function isRessourceReady<T>(res: Ressource<T>|undefined): res is T|undefined {\n\n    if( Array.isArray(res) )\n        return res.every( e => isRessourceReady(e) );\n\n    return res === undefined || !(res instanceof Promise || res instanceof Response);\n}\n\nexport async function waitRessource<T>(res: Ressource<T>): Promise<T> {\n\n    if( Array.isArray(res) )\n        return await Promise.all(res.map( e => waitRessource(e))) as T;\n\n    if( res instanceof Promise)\n        res = await res;\n\n    if( res instanceof Response)\n        res = await res.text() as T;\n\n    return res as T;\n}","import isTemplateString from \"./isTemplateString\";\nimport { Template } from \"./types\";\n\nconst template = document.createElement(\"template\");\nconst df = template.content;\n\nexport default function html<T extends HTMLElement>(...raw: Template<string>): T {\n    \n    let elem: string = raw[0] as any;\n\n    if( isTemplateString(raw) ) {\n        \n        const str = raw[0];\n\n        let string = str[0];\n        for(let i = 1; i < raw.length; ++i) {\n            string += raw[i];\n            string += str[i];\n        }\n\n        elem = string;\n    }\n\n    template.innerHTML = elem;\n\n    if( df.childNodes.length !== 1)\n        throw new Error(\"Error\");\n\n    return df.firstChild as T;\n}","import LISS from \"@LISS/src/LISS\";\n\nimport html     from \"./html\"\nimport template from \"./template\";\nimport style    from \"./style\";\n\ndeclare module \"@LISS/src/LISS\" {\n    interface ILISS {\n        html    : typeof html;\n        template: typeof template;\n        style   : typeof style;\n    }\n}\n\nLISS.style    = style;\nLISS.template = template;\nLISS.html     = html;\n\nexport {style, template, html};","export default function isTemplateString(raw: [unknown, ...unknown[]]): raw is [TemplateStringsArray, ...string[]] {\n    return Array.isArray(raw[0]);\n}","import { Template } from \"./types\";\n\nexport type CSS   = string|CSSStyleSheet|HTMLStyleElement;\n\nexport default function style(...raw: Template<CSS>): CSSStyleSheet {\n\n    let elem = raw[0];\n\n    if( elem instanceof CSSStyleSheet )\n        return elem;\n    if( elem instanceof HTMLStyleElement)\n        return elem.sheet!;\n\n    if( Array.isArray(elem) ) {\n        \n        const str = raw[0] as TemplateStringsArray;\n\n        let string = str[0];\n        for(let i = 1; i < raw.length; ++i) {\n            string += raw[i];\n            string += str[i];\n        }\n\n        elem = string;\n    }\n\n    if( typeof elem !== \"string\") {\n        console.warn(elem);\n        console.trace();\n        throw new Error(\"Should not occurs\");\n    }\n\n    const style = new CSSStyleSheet();\n    style.replaceSync(elem);\n    return style;\n}","import isTemplateString from \"./isTemplateString\";\nimport { Template } from \"./types\";\n\nexport type HTML  = DocumentFragment|HTMLElement|string;\n\nexport default function template( ...raw:Template<HTML>): DocumentFragment {\n\n    let elem: HTML = raw[0] as any;\n\n    if( isTemplateString(raw) ) {\n        \n        const str = raw[0];\n\n        let string = str[0];\n        for(let i = 1; i < raw.length; ++i) {\n            string += raw[i];\n            string += str[i];\n        }\n\n        elem = string;\n    }\n\n    if( elem instanceof DocumentFragment )\n        return elem.cloneNode(true) as DocumentFragment;\n\n    // must use template as DocumentFragment doesn't have .innerHTML\n    let template = document.createElement('template');\n\n    if(typeof elem === 'string')\n        template.innerHTML = elem.trim();\n    else {\n        if( elem instanceof HTMLElement)\n            // prevents issue if elem is latter updated.\n            elem = elem.cloneNode(true) as HTMLElement;\n        \n        template.append( elem );\n    }\n\n    //if( template.content.childNodes.length === 1 && template.content.firstChild!.nodeType !== Node.TEXT_NODE)\n    //  return template.content.firstChild! as unknown as T;\n    \n    return template.content!;\n}","import whenDefined from \"@LISS/src/define/whenDefined\";\n\ntype Options = {\n    shadow_html?: string,\n    css        ?: Record<string, Record<string, string>>\n}\n\nfunction waitFrame() {\n    const { promise, resolve} = Promise.withResolvers<void>();\n\n    requestAnimationFrame( () => resolve() );\n\n    return promise;\n}\n\nexport default async function assertElement(tagname: string, opts: Options = {}) {\n    \n    const shadow_html = opts.shadow_html ?? null;\n    const css         = opts.css         ?? {};\n\n\n    await whenDefined(tagname);\n\n    //for(let i = 0; i < 1; ++i)\n    //    await waitFrame();\n\n    const elem = document.querySelector(tagname);\n\n    if( elem === null )\n        throw new Error(\"Component not found\");\n\n    //TODO: await LISS.whenInitialized(elem); ?\n\n    if( elem.tagName.toLowerCase() !== tagname )\n        throw new Error(\n`Wrong tagname.\nExpected: ${tagname}\nGot: ${elem.tagName.toLowerCase()}`);\n\n    if( elem.constructor.name === \"HTMLElement\")\n        throw new Error(`Element not upgraded!`);\n\n    if( shadow_html !== elem.shadowRoot ) {\n        if( shadow_html === null || elem.shadowRoot === null )\n            throw new Error(`ShadowRoot missing or unexpected.`);\n        if( shadow_html !== elem.shadowRoot.innerHTML )\n            throw new Error(\n`HTML content mismatched.\nExpected: ${shadow_html}\nGot: ${elem.shadowRoot.innerHTML}`);\n    }\n\n    for(let selector in css ) {\n        const expected = css[selector];\n\n        let sub_elems: NodeListOf<HTMLElement>|HTMLElement[];\n        if( selector === \"\")\n            sub_elems = [elem as HTMLElement];\n        else\n            sub_elems = (((elem as any).content ?? elem.shadowRoot ?? elem) as ShadowRoot|HTMLElement).querySelectorAll<HTMLElement>(selector);\n    \n        if( sub_elems.length === 0)\n            throw new Error(`Elements \"${selector}\" not found`);\n\n        for( let sub_elem of sub_elems ) {\n\n            // compare style : https://stackoverflow.com/questions/59342928/getcomputedstyle-only-the-changes-from-default\n            //  ^ get all elements, find matching qs, compare\n            // pseudo class  : https://stackoverflow.com/questions/32091848/template-queryselector-using-scope-pseudo-class-works-with-document-but-not\n\n            const css = getComputedStyle(sub_elem)\n            for(let propname in expected) {\n                const val = css.getPropertyValue(propname);\n                if( val !== expected[propname] ) {\n                        throw new Error(\n        `CSS mismatch\n        Expected:${expected}\n        Got: ${css}`);\n                }\n            }\n        }\n    }\n}\n\nimport LISS from \"@LISS/src/LISS\";\n\ndeclare module \"@LISS/src/LISS\" {\n    interface ILISS {\n        assertElement    : typeof assertElement;\n    }\n}\n\nLISS.assertElement = assertElement;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// startup\n// Load entry module and return exports\n// This entry module used 'module' so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(7068);\n"],"names":["webpackQueues","webpackExports","webpackError","resolveQueue","LISS","VERSION","globalThis","regex","AutoContentGenerator","ContentGenerator","prepareTemplate","html","this","data","super","fillContent","shadow","str","replace","_","match","value","host","getAttribute","encodeHTML","sharedCSS","CSSStyleSheet","constructor","css","isReady","isRessourceReady","isDOMContentLoaded","prepare","whenReady","Promise","all","waitRessource","whenDOMContentLoaded","then","args","template","undefined","prepareStyle","Array","isArray","stylesheets","map","e","style","initContent","target","mode","content","attachShadow","adoptedStyleSheets","push","replaceChildren","createContent","customElements","upgrade","cloneNode","opts","base","LISSFull","generator","content_generator","static","LISSBase","HTMLElement","controler","klass","CONTENT_GENERATOR","SHADOW_MODE","attributeChangedCallback","name","oldval","newval","LISSSignal","LISSUpdate","Signal","requestUpdate","source","getPropertyInitialValue","ROSignal","listen","observer","observe","processIntersectionObserver","entries","i","length","isVisible","isIntersecting","cancelAnimationFrame","requestAnimationFrame","onInit","onUpdate","IntersectionObserver","script","document","querySelector","LISS_MODE","LISS_FILES","files","split","DEFAULT_CDIR","SW_PATH","autoload","cdir","SW","async","resolve","console","info","navigator","serviceWorker","register","scope","warn","error","controller","addEventListener","MutationObserver","mutations","mutation","addition","addedNodes","addTag","childList","subtree","elem","querySelectorAll","tag","tagname","tagName","toLowerCase","WaitingDefine","has","get","loadComponent","tryFile","compo_dir","ext","promises","fetchText","result","add","LISSContext","override_tags","found","file","Error","defineWebComponent","origin","execute","default","define","isPageLoaded","whenPageLoaded","Set","Klass","JSKlass","__bases__","filter","__name__","_js_klass","$js_func","symbol","__BRYTHON__","PYOBJ","bry","brython_wrapper_js","$call","$getattr_pep657","WrapPythonClass","delete","p","_whenDefinedPromises","isDefined","whenDefined","getName","WeakMap","withResolvers","set","promise","IndirectSignal","_callback","trigger","unlisten","ack","SignalEvent","_valueRead","callback","_value","oldValue","idx","lastIndexOf","defaultValue","Object","hasOwn","readyState","converter","createElement","text","textContent","innerHTML","getProp","bry_wrapper","wrapper_loaded","executeBry","code","executeJS","jscode","EXEC","js","type","Blob","url","URL","createObjectURL","id","slice","url_map","import","revokeObjectURL","uri","hide404","fetchContext","fetch","path","cwd","toString","options","headers","response","status","answer","require","stack","caller","startsWith","indexOf","res","every","Response","df","raw","isTemplateString","string","childNodes","firstChild","HTMLStyleElement","sheet","trace","replaceSync","DocumentFragment","trim","append","assertElement","shadow_html","shadowRoot","selector","expected","sub_elems","sub_elem","getComputedStyle","propname","getPropertyValue","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","Symbol","queue","d","forEach","fn","r","a","body","hasAwait","currentDeps","outerResolve","reject","depQueues","rej","x","deps","dep","obj","ret","wrapDeps","getResult","fnQueue","q","err","definition","key","o","defineProperty","enumerable","prop","prototype","hasOwnProperty","call","__webpack_exports__"],"sourceRoot":""}